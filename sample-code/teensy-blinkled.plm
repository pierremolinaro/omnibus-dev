target "target-teensy-sequential.plms"

//-----------------------------------------------------------------------------*

proc $user setup () {
  PORTC_PCR5 = (1 << 8)
  GPIOC_PDDR = GPIOC_PDDR | (1 << 5)
}

//-----------------------------------------------------------------------------*

var $user gCompteur : UInt32 = 0
var $user gEtat : Bool = .false

//-----------------------------------------------------------------------------*

let periode : UInt32 = 1_000_000

//-----------------------------------------------------------------------------*

proc $user loop () {
  if gCompteur == periode then
    gCompteur = 0
    gEtat = gEtat ^ .true
    if gEtat then
     GPIOC_PSOR = 1 << 5
    else
     GPIOC_PCOR = 1 << 5
    end
  else
    gCompteur ++
  end
}

//-----------------------------------------------------------------------------*
