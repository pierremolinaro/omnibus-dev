target "target-teensy-sequential.plms"

//-----------------------------------------------------------------------------*

proc $user setup () {
  portC_PCR5 = (1 << 8)
  gpioC_PDDR = gpioC_PDDR | (1 << 5)
}

//-----------------------------------------------------------------------------*

var $user UInt32 gCompteur = 0
var $user Bool gEtat = .false

//-----------------------------------------------------------------------------*

let UInt32 periode = 1_000_000

//-----------------------------------------------------------------------------*

proc $user loop () {
  if gCompteur == periode then
    gCompteur = 0
    gEtat = gEtat ^ .true
    if gEtat then
     gpioC_PSOR = 1 << 5
    else
     gpioC_PCOR = 1 << 5
    end
  else
    gCompteur ++
  end
}

//-----------------------------------------------------------------------------*
