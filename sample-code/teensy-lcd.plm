target "target-teensy-sequential-systick.plms"

//-----------------------------------------------------------------------------*

proc setup $user () {
}

//-----------------------------------------------------------------------------*

var gClignotement $isr : UInt32 = 0

//-----------------------------------------------------------------------------*

proc userSystickHandler $isr () {
  gClignotement ++
  if gClignotement == 500 then
    ledOn (!LED_L0) ;
  elsif gClignotement == 1000 then
    gClignotement = 0
    ledOff (!LED_L0) ;
  end
}

//-----------------------------------------------------------------------------*

var gVar $user : UInt32 = 12

var gYYYYY $user : UInt8 = 5
var gZZZZZ $user : UInt32 = 5

//-----------------------------------------------------------------------------*

proc loop $user () {
  waitMS (!100)
  ledOn (!LED_TEENSY)
  waitMS (!100)
  ledOff (!LED_TEENSY)
  gVar ++ // Engendre une exception
  goto (!line:0 !column: 0)
  printSpaces (!4)
  goto (!line:0 !column: 0)
  printUnsigned (!gVar)
//  if 0 == (gVar & 15) then
//    gZZZZZ = gYYYYY + gVar
//  end
}

//-----------------------------------------------------------------------------*
