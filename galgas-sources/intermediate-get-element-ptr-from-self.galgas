
setter @instructionListIR appendGetElementPtrFromSelf
  ?let @objectInMemoryIR inTarget
  ?let @unifiedTypeMap-proxy inSelfType
  ?let @uint inFieldIndex
  ?let @string inFieldName
{
  self += !@getElementPtrFromSelfIR.new {!inTarget !inSelfType !inFieldIndex !inFieldName}
}

#———————————————————————————————————————————————————————————————————————————————————————————————————————————————————————

class @getElementPtrFromSelfIR : @abstractInstructionIR {
  @objectInMemoryIR mTarget
  @unifiedTypeMap-proxy mSelfType
  @uint mFieldIndex
  @string mFieldName
}

#———————————————————————————————————————————————————————————————————————————————————————————————————————————————————————

override method @getElementPtrFromSelfIR llvmInstructionCode
  ?!@string ioLLVMcode
  ?let @generationContext unused inGenerationContext
  ?!@generationAdds unused ioGenerationAdds
{
  let llvmType = [mSelfType llvmTypeName]
  ioLLVMcode += "  " + [mTarget llvmName] + " = getelementptr inbounds "
  ioLLVMcode += llvmType + ", " + llvmType + "* %self, i32 0, i32 " + mFieldIndex + " ; " + mFieldName + "\n"
}

#———————————————————————————————————————————————————————————————————————————————————————————————————————————————————————

override method @getElementPtrFromSelfIR enterAccessibleEntities ?!@accessibleEntities unused ioAccessibleEntities {
}

#———————————————————————————————————————————————————————————————————————————————————————————————————————————————————————
