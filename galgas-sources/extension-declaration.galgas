#———————————————————————————————————————————————————————————————————————————————————————————————————————————————————————
#  AST                                                                                                                  
#———————————————————————————————————————————————————————————————————————————————————————————————————————————————————————

list @extensionDeclarationListAST {
  @lstring mTypeName
  @procedureDeclarationListAST mProcedureDeclarationListAST
  @structureFieldListAST mFieldList
  @functionDeclarationListAST mFunctionDeclarationListAST
}

#———————————————————————————————————————————————————————————————————————————————————————————————————————————————————————
#  SYNTAX                                                                                                               
#———————————————————————————————————————————————————————————————————————————————————————————————————————————————————————

syntax extension common_syntax {

  #·····················································································································

  rule <declaration> ?!@ast ioAST {
    $extension$
    $typeName$ ?let typeName
    ${$
    @procedureDeclarationListAST procedureDeclarationListAST = {}
    @structureFieldListAST fieldList = {}
    @functionDeclarationListAST functionDeclarationListAST = {}
    repeat
    while
      $var$
      $identifier$ ?let fieldName
      $typeName$ ?let typeName
      $=$
      <expression> ?let initExpression
      fieldList += !fieldName !typeName !initExpression
    while
      <procedure> !?procedureDeclarationListAST
    while
      $func$
      <function_declaration> !?functionDeclarationListAST
    while
      $;$
    end
    $}$
    ioAST.mExtensionDeclarationListAST += !typeName !procedureDeclarationListAST !fieldList !functionDeclarationListAST
  }

  #·····················································································································

}

#———————————————————————————————————————————————————————————————————————————————————————————————————————————————————————

abstract method @abstractDeclaration addExtension
  ?!@extensionDeclarationListAST ioExtensionDeclarationListAST
  !@abstractDeclaration outNewDeclaration

#———————————————————————————————————————————————————————————————————————————————————————————————————————————————————————
