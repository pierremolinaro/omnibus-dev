#———————————————————————————————————————————————————————————————————————————————————————————————————————————————————————
#  SYNTAX                                                                                                               
#———————————————————————————————————————————————————————————————————————————————————————————————————————————————————————

syntax plm_syntax (plm_lexique) {

  #·····················································································································

  rule <import_file> ?!@lstringlist ioImportedFileList {
    $import$
    $"string"$ ?let importedFile
    ioImportedFileList += !importedFile
    if [importedFile.string pathExtension] != "plm" then
      error importedFile : "the pah extension should be .plm"
    end
  }


  #·····················································································································

  rule <start_symbol>
    ?!@ast ioAST
    !importClauseList:@lstringlist outImportedFileList
    !endOfSourceFile:@location outEndOfSourceFile
  {
    outImportedFileList = {}
    repeat
    while
      <declaration> !?ioAST
    while
     @functionDeclarationListAST standAloneFunctionDeclarationListAST = {}
      <function> !?ioAST !?standAloneFunctionDeclarationListAST
      ioAST.mStandAloneFunctionDeclarationListAST += standAloneFunctionDeclarationListAST
    while
      @systemRoutineDeclarationListAST standAloneSystemRoutineListAST = {}
      <system_routine> !?ioAST !?standAloneSystemRoutineListAST
      ioAST.mStandAloneSystemRoutineListAST += standAloneSystemRoutineListAST
#    while
#      <isr> !?ioAST !["" nowhere] # No module name
    while
      <import_file> !?outImportedFileList
    end
    outEndOfSourceFile = .here
  }

}

#———————————————————————————————————————————————————————————————————————————————————————————————————————————————————————

syntax plm_target_specific_syntax (plm_lexique) {

}

#———————————————————————————————————————————————————————————————————————————————————————————————————————————————————————
#  GRAMMARS
#———————————————————————————————————————————————————————————————————————————————————————————————————————————————————————

grammar plm_grammar "SLR" {
  syntax plm_syntax
  <start_symbol>
    ?!@ast outAst
    !importClauseList:@lstringlist outImportedFileList
    !endOfSourceFile:@location outEndOfSourceFile
}

#———————————————————————————————————————————————————————————————————————————————————————————————————————————————————————

grammar plm_target_grammar "SLR" {
  syntax plm_target_specific_syntax
  <configuration_start_symbol>
    ?!@ast outAst
    !importClauseList:@lstringlist outImportedFileList
    !endOfSourceFile:@location outEndOfSourceFile
}

#———————————————————————————————————————————————————————————————————————————————————————————————————————————————————————
