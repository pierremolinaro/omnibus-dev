#———————————————————————————————————————————————————————————————————————————————————————————————————————————————————————
#                                                                                                                       
#    I N T E R M E D I A T E    C O D E    G E N E R A T I O N                                                          
#                                                                                                                       
#———————————————————————————————————————————————————————————————————————————————————————————————————————————————————————

struct @intermediateCodeStruct {
  @staticStringMap mStaticStringMap
  @globalVariableMapIR mGlobalVariableMap
  @globalConstantMapIR mGlobalConstantMap
  @routineMapIR mRoutineMapIR
  @guardMapIR mGuardMapIR
  @interruptMapIR mInterruptMapIR
  @externProcedureMapIR mExternProcedureMapIR
  @stringset mRequiredProcedureSet
  @bootListIR mBootList
  @initListIR mInitList
  @instructionListSortedListIR mPanicSetupInstructionListIR
  @instructionListSortedListIR mPanicLoopInstructionListIR
  @taskMapIR mTaskMapIR
  @globalTaskVariableList mGlobalTaskVariableList
  @uint mMaxBranchOfOnInstructions
  @targetParameters mTargetParameters
  @moduleListIR mModuleList
  @staticListInvokedFunctionSetMap mStaticArrayMapForIntermediate
  @generationListIR mGenerationListIR
}

#———————————————————————————————————————————————————————————————————————————————————————————————————————————————————————

map @globalVariableMapIR {
#  @PLMType mType
  @bool mGenerateVolatile
  @objectIR mInitialValue
  insert insertKey error message "** internal error **"
  search searchKey error message "** internal error **"
}

#———————————————————————————————————————————————————————————————————————————————————————————————————————————————————————

map @globalConstantMapIR {
  @unifiedTypeMap-proxy mType
  @objectIR mSourceExpression
  insert insertKey error message "** internal error **"
  search searchKey error message "** internal error **"
}

#———————————————————————————————————————————————————————————————————————————————————————————————————————————————————————

map @routineMapIR {
  @PLMType mReceiverType # .void if standalone function
  @lstring mRoutineNameForGeneration
  @routineFormalArgumentListIR mFormalArgumentListForGeneration
  @allocaList mAllocaList
  @instructionListIR mInstructionGenerationList
  @bool mIsRequired
  @bool mWarnIfUnused
  @bool mGlobal
  @routineKind mKind
  @PLMType mReturnType # .void if no return value
  @bool mAppendFileAndLineArgumentForPanicLocation

  insert insertKey error message "routine '%K' is already defined"
  search searchKey error message "** internal error **"
  remove removeKey error message "** internal error **"
}

#———————————————————————————————————————————————————————————————————————————————————————————————————————————————————————

map @interruptMapIR {
  @PLMType mSelfType # void if standalone
  @string mGlobalVariableName # "" if standalone
  @allocaList mAllocaList
  @instructionListIR mInstructionGenerationList
  @mode mMode

  insert insertKey error message "interrupt '%K' is already defined"
  search searchKey error message "** internal error **"
  remove removeKey error message "** internal error **"
}

#———————————————————————————————————————————————————————————————————————————————————————————————————————————————————————
