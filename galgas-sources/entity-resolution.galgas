#———————————————————————————————————————————————————————————————————————————————————————————————————————————————————————
#   S O L V E   E N T I T I E S
#———————————————————————————————————————————————————————————————————————————————————————————————————————————————————————

proc solveEntities
  ?ast:let @ast inAST
  ?context:let @semanticContext inSemanticContext
{
#--------------------------------------------- Stand alone functions
  [inAST.mStandAloneFunctionDeclarationListAST solveEntities
    !context:inSemanticContext
  ]
#--------------------------------------------- Declarations
  for (declaration) in inAST.mDeclarationListAST do
    [declaration solveEntitiesForDeclarations
      !context:inSemanticContext
     ]
  end
#  [inAST.mTaskListAST semanticAnalysis
#    !context:inSemanticContext
#    !?temporary:temporaries
#    !?intermediateCode:outIntermediateCodeStruct
#  ]
#--------------------------------------------- Stand alone system routine
  [inAST.mStandAloneSystemRoutineListAST solveEntities
    !receiverType:.void
    !context:inSemanticContext
  ]
#  [inAST.mGuardListAST guardSemanticAnalysis
#    !receiverType:.null
#    !context:inSemanticContext
#    !?temporary:temporaries
#    !?intermediateCode:outIntermediateCodeStruct
#  ]
#  [inAST.mExternProcListAST externProcedureSemanticAnalysis
#    !context:inSemanticContext
#    !?temporary:temporaries
#    !?intermediateCode:outIntermediateCodeStruct
#  ]
#  [inAST.mISRDeclarationListAST isrSemanticAnalysis
#    !context:inSemanticContext
#    !?temporary:temporaries
#    !?intermediateCode:outIntermediateCodeStruct
#  ]
#  for boot in inAST.mBootListAST do
#    [boot bootSemanticAnalysis
#      !context:inSemanticContext
#      !?temporary:temporaries
#      !?intermediateCode:outIntermediateCodeStruct
#    ]
#  end
#  for init in inAST.mInitListAST do
#    [init initSemanticAnalysis
#      !context:inSemanticContext
#      !?temporary:temporaries
#      !?intermediateCode:outIntermediateCodeStruct
#    ]
#  end
##--- Generate panic clauses
#  for panic in inAST.mPanicClauseListAST do
#    [panic panicSemanticAnalysis
#      !context:inSemanticContext
#      !?temporary:temporaries
#      !?intermediateCode:outIntermediateCodeStruct
#    ]
#  end
##--- Check required procedure are defined
#  checkRequiredProcedures (
#    !ast:inAST
#    !context:inSemanticContext
#    !endOfSourceFile:inEndOfSourceFile
#  )
##--- Print procedure invocation graph
#  if (@uint.errorCount == 0) && [option plm_options.writeRoutineInvocationGraphFile value] then
#    let s = [temporaries.mSubprogramInvocationGraph graphviz]
#    let filePath = [inSourceFile stringByDeletingPathExtension] + ".routineInvocation.dot"
#    [s writeToFileWhenDifferentContents !filePath ?*]
#  end
##--- Check procedure invocation graph
#  if (@uint.errorCount == 0) && not [option plm_options.doNotDetectRecursiveCalls value] then
#    let undefinedNodeKeyList = [temporaries.mSubprogramInvocationGraph undefinedNodeKeyList]
#    if [undefinedNodeKeyList length] > 0 then
#        var s = "subprogram invocation graph error, undefined nodes:"
#        for (str) in undefinedNodeKeyList do
#          s += "\n - " + str
#        end
#        error inEndOfSourceFile : s
#    else
#      [temporaries.mSubprogramInvocationGraph circularities
#         ?let @lstringlist unused unsortedInformationList
#         ?let @lstringlist unsortedLKeyList
#      ]
#      if [unsortedLKeyList length] > 0 then
#        var s = "the following routines are recursive:"
#        for (str) in unsortedLKeyList do
#          s += "\n - " + str
#        end
#        error inEndOfSourceFile : s
#      end
#    end
#  end
}

#———————————————————————————————————————————————————————————————————————————————————————————————————————————————————————
