#----------------------------------------------------------------------------------------------------------------------*

method @objectInMemoryIR loadFromMemory
  ?!temporary:@semanticTemporariesStruct ioTemporaries
  ?!instructionListIR:@instructionListIR ioInstructionGenerationList
  !resultingValue:@valueIR outResultingValue
{
  switch self
  case register (@unifiedTypeMap-proxy type @lstring name @bigint address) :
    getNewTempVariable (!type !?ioTemporaries ?outResultingValue)
    [!?ioInstructionGenerationList appendComment ![outResultingValue string] + " = " + name]
    [!?ioInstructionGenerationList appendLoadVolatileRegister
      !outResultingValue
      !name.string
      !type
      !address
    ]
  case globalVariable (@unifiedTypeMap-proxy type @string name @bool isVolatile) :
    getNewTempVariable (!type !?ioTemporaries ?outResultingValue)
    [!?ioInstructionGenerationList appendComment ![outResultingValue string] + " = " + name]
    [!?ioInstructionGenerationList appendLoadGlobalVariable
      !outResultingValue
      !name
      !type
      !volatile:isVolatile
    ]
  case localValue (@unifiedTypeMap-proxy type @lstring name) :
    getNewTempVariable (!type !?ioTemporaries ?outResultingValue)
    [!?ioInstructionGenerationList appendComment ![outResultingValue string] + " = " + name]
    [!?ioInstructionGenerationList appendLoadLocalVariable
      !outResultingValue
      !name.string
      !type
    ]
  case globalConstant (@unifiedTypeMap-proxy type @string name) :
    getNewTempVariable (!type !?ioTemporaries ?outResultingValue)
    [!?ioInstructionGenerationList appendComment ![outResultingValue string] + " = " + name]
    [!?ioInstructionGenerationList appendLoadGlobalVariable
      !outResultingValue
      !name
      !type
      !volatile:false
    ]
  case localAccess (@lstring access) :
    error access : "@objectInMemoryIR loadFromMemory:access" : outResultingValue
  case literalStructure (*) :
    error .nowhere : "@objectInMemoryIR loadFromMemory:literalStructure" : outResultingValue
  end
}

#----------------------------------------------------------------------------------------------------------------------*

method @objectInMemoryIR storeInMemory
  ?value:@valueIR inValue
  ?!instructionListIR:@instructionListIR ioInstructionGenerationList
{
  switch self
  case register (@unifiedTypeMap-proxy type @lstring registerName @bigint address) :
    [!?ioInstructionGenerationList appendStoreVolatileRegister !registerName.string !type !address !inValue]
  case globalVariable (@unifiedTypeMap-proxy type @string name @bool isVolatile) :
    [!?ioInstructionGenerationList appendStoreGlobalVariable !name !type !inValue !volatile:isVolatile]
  case localValue (@unifiedTypeMap-proxy type @lstring unused name) :
    [!?ioInstructionGenerationList appendStoreLocalVariable !name.string !type !inValue]
  case globalConstant (* *) :
     error .nowhere : "<<@objectInMemoryIR storeInMemory globalConstant>>"
  case localAccess (@lstring unused access) :
     error .nowhere : "<<@objectInMemoryIR storeInMemory localAccess>>"
  case literalStructure (@literalStructureList unused value) :
     error .nowhere : "<<@objectInMemoryIR storeInMemory literalStructure>>"
  end
}

#----------------------------------------------------------------------------------------------------------------------*
